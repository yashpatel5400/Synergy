{% extends "base.html" %}

{% block header %}
    <style type="text/css">
		.circle_green { 
			width:1%;
			padding:10px 11px;
			margin:0 auto;
			border-radius:100%;
			background-color:green;
		}
	</style>

	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

	<!-- Optional theme -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/rickshaw/1.6.0/rickshaw.min.css" />
	<link href="../static/css/agency.min.css" rel="stylesheet">
{% endblock %}

{% block content %}
	<div id="container" class="container">
		<div class="page-header">
			<h1>{{ data["topic"] }}</h1>
			<p class="lead">From {{ data["date_str"] }} and lasted {{ data["dur_str"] }}</p>
		</div>

		<h2>Main Ideas</h2>
		<ul style="list-style: none;">
			{% for idea in data["ideas"] %}
			<li>
				<h3>{{ idea }}</h3>
			</li>
			{% endfor %}
		</ul>

		<div id="chart"></div>
			<h2>People</h2>
			<table style="border-collapse: separate;border-spacing: 10px;">
				<tr>
					<td>Speaker</td>
					<td>Duration (% Overall)</td>
				</tr>
				{% for i in range(data["overall_speaker"]|length) %}
				<tr>
					<td>{{  data["overall_speaker"][i]  }}</td>
					<td>{{ data["overall_durations"][i] }}</td>
				</tr>
				{% endfor %}
			</table>
	
			<h2>Transcript</h2>
			<table style="border-collapse: separate;border-spacing: 10px;">
				{% for i in range(data["speakers"]|length) %}
				<tr style="vertical-align:top;">
					<td>{{ data["speakers"][i] }}</td>
					<td>{{ data["start_times"][i] }}</td>
					<td><div class="circle_green"></td>
					<td><p>({{ '%.02f' % data["durations"][i] }} s): {{ data["text"][i] }} </p></td>
				</tr>
				{% endfor %}
			</table>
	</div>
	
	<script>
		var graph = new Rickshaw.Graph( {
			element: document.getElementById("chart"),
			width: document.getElementById('container').offsetWidth,
			height: 200,
		renderer: 'line',
			min: -.01,
			interpolation: 'basis',
			series: [
				{
				data: [ {{ series1_str }} ],
				color: '#ff0000'
				}, {
				data: [ {{ series2_str }} ],
			color: '#0000ff'
				}, {
				data: [ {{ series3_str }} ],
				color: '#00ff00'
				}
				]
		} );
		graph.render();
	</script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/rickshaw/1.6.0/rickshaw.min.js"></script>
	
{% endblock %}